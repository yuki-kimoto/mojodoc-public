<!DOCTYPE html>
<html>
  <head>
    <!-- meta -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="icon" type="image/x-icon" href="/images/giblog-logo.png">
<link rel="stylesheet" type="text/css" href="/css/common.css">

<title> - Mojoliciousドキュメント 日本語訳</title>
<meta name="description" content="Mojolicious API リファレンス">
  </head>
  <body>
    <div class="container">
      <div class="header">
        <!-- header -->
<div class="main">
  <h1>
    <a href="/">Mojoliciousドキュメント 日本語訳</a>
  </h1>
</div>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    <!-- top -->

  </div>
  <div class="middle">
    <html><head><title>名前</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.40,
  using Pod::Simple::PullParser v3.40,
  under Perl v5.028000 at Tue Apr  7 04:16:24 2020 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<p><a href="/Mojolicious API リファレンス.html">Mojolicious API リファレンス</a></p>

<h1><a href="/Mojo::Template.html"></a><a class='u'
name="_"
>名前</a></h1>

<p>Mojo::Template - Perlで書けるテンプレート!</p>

<h1><a class='u'
name="_"
>使い方</a></h1>

<pre>use Mojo::Template;

# Perlモジュールを使う
my $mt = Mojo::Template->new;
say $mt->render(<<'EOF');
% use Time::Piece;
<div>
  % my $now = localtime;
  Time: <%= $now->hms %>
</div>
EOF

# 引数を渡して描画
say $mt->render(<<'EOF', [1 .. 13], 'Hello World!');
% my ($numbers, $title) = @_;
<div>
  <h1><%= $title %></h1>
  % for my $i (@$numbers) {
    Test <%= $i %>
  % }
</div>
EOF

# 名前つきの変数を渡して描画
say $mt->vars(1)->render(<<'EOF', {title => 'Hello World!'});
<div>
  <h1><%= $title %></h1>
  %= 5 + 5
</div>
EOF</pre>

<h1><a class='u'
name="_"
>説明</a></h1>

<p><a href="/Mojo::Template.html">Mojo::Template</a>は最小限でとてもPerlらしいテンプレートエンジンです。 特に長い期間にわたる大きなプロジェクトになるすべての小さな仕事のために 設計されています。 設定ファイルの前処理のように、ヒアドキュメントとそれに似たようなことから テキストを生成できます。</p>

<h1><a class='u'
name="_"
>文法</a></h1>

<p><a href="/Mojolicious.html">Mojolicious</a>のレンダラーでコンテンツを生成する方法の情報については<a href="/Mojolicious::Guides::Rendering.html">Mojolicious::Guides::Rendering</a>を見てください。</p>

<pre><% Perlのコード %>
<%= Perlの実行文。結果に置き換えられる。 %>
<%== Perlの実行文。XMLエスケープされた結果に置き換えられる。 %>
<%# コメント。デバッグに便利 %>
<%% "<%"に置換される。テンプレートを生成するのに便利
% Perlのコードでできた行。"<% line =%>"と同じ
%= Perlの実行文でできた行, "<%= line %>"と同じ
%== Perlの実行文でできた行。"<%== line %>"と同じ
%# コメントの行。"<%# line =%>"と同じ
%% "%"に置換される。テンプレートを生成するのに便利</pre>

<p>自動的なエスケープの処理は<code>auto_escape</code>属性を使って反転させるこことができます。 これはたとえば<a href="/Mojolicious.html">Mojolicious</a>の<code>.ep</code>テンプレートのデフォルトです。</p>

<pre><%= Perlの文。XMLエスケープされた結果に置き換えられる。 %>
<%== Perlの文。結果に置き換えられる。 %></pre>

<p><a href="/Mojo::ByteStream.html">Mojo::ByteStream</a>オブジェクトはいつでも自動的なエスケープの対象外になります。</p>

<pre>% use Mojo::ByteStream 'b';
<%= b('<div>excluded!</div>') %></pre>

<p>タグに囲まれた空白文字は、追加のイコールをタグの末尾につけることで、 取り除くことができます。</p>

<pre><% for (1 .. 3) { %>
  <%= 'Trim all whitespace characters around this expression' =%>
<% } %></pre>

<p>新しい行はバックスラッシュでエスケープすることができます。</p>

<pre>This is <%= 1 + 1 %> a\
single line</pre>

<p>新しい行の前のバックスラッシュはもうひとつのバックスラッシュをエスケープします。</p>

<pre>This will <%= 1 + 1 %> result\\
in multiple\\
lines</pre>

<p>改行文字は、すべてのテンプレートに自動的に追加されます。 最後の文字はバックスラッシュです。テンプレートの最後にある空行は 無視されます。</p>

<pre>There is <%= 1 + 1 %> no newline at the end here\</pre>

<p>後で再利用するために<code>begin</code>と<code>end</code>キーワードを使って、 テンプレートブロック全体をキャプチャすることができます。 両方のキーワードが周囲のタグの一部で、実際のPerlコードではないことに注意してください。 ですので、<code>begin</code>の後と<code>end</code>の前には、空白だけを置くことができます。</p>

<pre><% my $block = begin %>
  <% my $name = shift; =%>
  Hello <%= $name %>.
<% end %>
<%= $block->('Baerbel') %>
<%= $block->('Wolfgang') %></pre>

<p>Perlの行においても自由にインデントすることができます。</p>

<pre>% my $block = begin
  % my $name = shift;
  Hello <%= $name %>.
% end
%= $block->('Baerbel')
%= $block->('Wolfgang')</pre>

<p><a href="/Mojo::Template.html">Mojo::Template</a>テンプレートはPerlのサブルーチン(実際には内部的なPerlのサブルーチンにコンパイルrされる)の用に機能します。 つまり引数は簡単に<code>@_</code>を使ってアクセスできるということを意味します。</p>

<pre>% my ($foo, $bar) = @_;
% my $x = shift;
test 123 <%= $foo %></pre>

<p>テンプレートは内部的にはPerlのコードにコンパイルされるので、 デバックは少しトリッキーになります。 しかし、<a href="/Mojo::Template.html">Mojo::Template</a>は状況つきのエラーメッセージを文字列化するための <a href="/Mojo::Exception.html">Mojo::Exception</a>オブジェクトを返却します。</p>

<pre>Bareword "xx" not allowed while "strict subs" in use at template line 4.
2: </head>
3: <body>
4: % my $i = 2; xx
5: %= $i * 2
6: </body>
template:4 (Mojo::Template::Sandbox)
path/to/Mojo/Template.pm:123 (Mojo::Template)
path/to/myapp.pl:123 (main)</pre>

<h1><a class='u'
name="_"
>属性</a></h1>

<p><a href="/Mojo::Template.html">Mojo::Template</a>は次の属性を実装しています。</p>

<h2><a class='u'
name="auto_escape"
>auto_escape</a></h2>

<pre>my $bool = $mt->auto_escape;
$mt      = $mt->auto_escape($bool);</pre>

<p>自動的なXMLエスケープを有効にします。</p>

<h2><a class='u'
name="append"
>append</a></h2>

<pre>my $code = $mt->append;
$mt      = $mt->append('warn "Processed template"');</pre>

<p>Perlのコードをコンパイルされたテンプレートに追加します。 このコードには含めないでください 改行文字、またはエラーメッセージ内の行番号は、間違っている可能性があります。</p>

<h2><a class='u'
name="capture_end"
>capture_end</a></h2>

<pre>my $capture_end = $mt->capture_end;
$mt             = $mt->capture_end('end');</pre>

<p>キャプチャブロックの終了を示すキーワード。 デフォルトは<code>end</code>。</p>

<pre><% my $block = begin %>
  Some data!
<% end %></pre>

<h2><a class='u'
name="capture_start"
>capture_start</a></h2>

<pre>my $capture_start = $mt->capture_start;
$mt               = $mt->capture_start('begin');</pre>

<p>キャプチャブロックの開始を示すキーワード。 デフォルトは<code>begin</code>。</p>

<pre><% my $block = begin %>
  Some data!
<% end %></pre>

<h2><a class='u'
name="code"
>code</a></h2>

<pre>my $code = $mt->code;
$mt      = $mt->code($code);</pre>

<p>コンパイルされたテンプレートのコード。</p>

<h2><a class='u'
name="comment_mark"
>comment_mark</a></h2>

<pre>my $comment_mark = $mt->comment_mark;
$mt              = $mt->comment_mark('#');</pre>

<p>コメントの開始を示す文字。デフォルトは<code>#</code>。</p>

<pre><%# This is a comment %></pre>

<h2><a class='u'
name="compiled"
>compiled</a></h2>

<pre>my $compiled = $mt->compiled;
$mt          = $mt->compiled($compiled);</pre>

<p>コンパイルされたテンプレートコード。</p>

<h2><a class='u'
name="encoding"
>encoding</a></h2>

<pre>my $encoding = $mt->encoding;
$mt          = $mt->encoding('UTF-8');</pre>

<p>テンプレートファイルで利用されるエンコーディング。</p>

<h2><a class='u'
name="escape"
>escape</a></h2>

<pre>my $cb = $mt->escape;
$mt    = $mt->escape(sub {...});</pre>

<p>エスケープ表現の結果をエスケープするために利用されるコールバック。 デフォルトは<a href="/Mojo::Util.html">Mojo::Util</a>の<code>xss_escape</code>です。</p>

<pre>$mt->escape(sub {
  my $str = shift;
  return reverse $str;
});</pre>

<h2><a class='u'
name="escape_mark"
>escape_mark</a></h2>

<pre>my $escape_mark = $mt->escape_mark;
$mt             = $mt->escape_mark('=');</pre>

<p>エスケープされた文の開始を示す文字。デフォルトは<code>=</code>。</p>

<pre><%== $foo %></pre>

<h2><a class='u'
name="expression_mark"
>expression_mark</a></h2>

<pre>my $expression_mark = $mt->expression_mark;
$mt                 = $mt->expression_mark('=');</pre>

<p>式のスタートの開始を示す文字。デフォルトは<code>=</code>。</p>

<pre><%= $foo %></pre>

<h2><a class='u'
name="line_start"
>line_start</a></h2>

<pre>my $line_start = $mt->line_start;
$mt            = $mt->line_start('%');</pre>

<p>コードの行の開始を示す文字。デフォルトは<code>%</code>。</p>

<pre>% $foo = 23;</pre>

<h2><a class='u'
name="name"
>name</a></h2>

<pre>my $name = $mt->name;
$mt      = $mt->name('foo.mt');</pre>

<p>現在の処理中のテンプレートの名前。デフォルト<code>template</code>です。 この値は、クォートまたは、新しい行の文字を含むべきではありません。 エラーメッセージが間違ったものになるでしょう。</p>

<h2><a class='u'
name="namespace"
>namespace</a></h2>

<pre>my $namespace = $mt->namespace;
$mt           = $mt->namespace('main');</pre>

<p>テンプレートをコンパイルするために利用される名前空間。 デフォルトは<a href="/ Mojo::Template::SandBox.html"> Mojo::Template::SandBox</a>。</p>

<p>名前空間はテンプレート間で非常に慎重に共有されるべきです。 関数とグローバル変数は自動的にクリアされないためです。</p>

<h2><a class='u'
name="prepend"
>prepend</a></h2>

<pre>my $code = $mt->prepend;
$mt      = $mt->prepend('my $self = shift;');</pre>

<p>コンパイルされたPerコードの前に追加します。 このコードは改行文字を追加しないように注意してください。 そうしなければ、エラーメッセージの行番号が間違った結果になってしまいます。</p>

<h2><a class='u'
name="replace_mark"
>replace_mark</a></h2>

<pre>my $replace_mark = $mt->replace_mark;
$mt              = $mt->replace_mark('%');</pre>

<p>タグと行の開始をエスケープするために利用される文字。 デフォルトは<code>%</code>。</p>

<pre><%% my $foo = 23; %></pre>

<h2><a class='u'
name="tag_start"
>tag_start</a></h2>

<pre>my $tag_start = $mt->tag_start;
$mt           = $mt->tag_start('<%');</pre>

<p>タグの開始を示す文字。デフォルトは<code><%</code>。</p>

<pre><% $foo = 23; %></pre>

<h2><a class='u'
name="tag_end"
>tag_end</a></h2>

<pre>my $tag_end = $mt->tag_end;
$mt         = $mt->tag_end('%>');</pre>

<p>タグの終了を示す文字。デフォルトは<code>%></code>。</p>

<pre><%= $foo %></pre>

<h2><a class='u'
name="tree"
>tree</a></h2>

<pre>my $tree = $mt->tree;
$mt      = $mt->tree([['text', 'foo'], ['line']]);</pre>

<p>解析された木。この構造は動的なものなので、慎重に利用してください。</p>

<h2><a class='u'
name="trim_mark"
>trim_mark</a></h2>

<pre>my $trim_mark = $mt->trim_mark;
$mt           = $mt->trim_mark('-');</pre>

<p>自動的な空白のトリミングを有効にする文字列。 デフォルトは<code>=</code>。</p>

<pre><%= $foo =%></pre>

<h2><a class='u'
name="unparsed"
>unparsed</a></h2>

<pre>my $unparsed = $mt->unparsed;
$mt          = $mt->unparsed($unparsed);</pre>

<p>生の未解析のテンプレート。</p>

<h2><a class='u'
name="vars"
>vars</a></h2>

<pre>my $bool = $mt->vars;
$mt      = $mt->vars($bool);</pre>

<p>データをテンプレートに渡すために、値のリストの代わりに、名前の付いた変数でハッシュリファレンスを使用します。</p>

<pre># "works!"
Mojo::Template->new(vars => 1)->render('<%= $test %>!', {test => 'works'});</pre>

<h1><a class='u'
name="_"
>メソッド</a></h1>

<p><a href="/Mojo::Template.html">Mojo::Template</a>は<a href="/Mojo::Base.html">Mojo::Base</a>からすべてのメソッドを継承しており、 次の新しいメソッドを実装しています。</p>

<h2><a class='u'
name="parse"
>parse</a></h2>

<pre>$mt = $mt->parse('<%= 1 + 1 %>');</pre>

<p>テンプレートを解析して<code>tree</code>に設定します。</p>

<h2><a class='u'
name="process"
>process</a></h2>

<pre>my $output = $mt->process;
my $output = $mt->process(@args);
my $output = $mt->process({foo => 'bar'});</pre>

<p>Process previously parsed template and return the result, or a <a href="https://metacpan.org/pod/Mojo%3A%3AException" class="podlinkpod"
>Mojo::Exception</a> object if rendering failed.</p>

<p>以前に解析されたテンプレートを処理して結果を返します。描画に失敗した場合は、<a href="/Mojo::Exception.html">Mojo::Exception</a>オブジェクトを返します。</p>

<pre># 解析と処理
say Mojo::Template->new->parse('Hello <%= $_[0] %>')->process('Bender');

# テンプレートノ再利用 (よりよいパフォーマンス)
my $mt = Mojo::Template->new;
say $mt->render('Hello <%= $_[0] %>!', 'Bender');
say $mt->process('Fry');
say $mt->process('Leela');</pre>

<h2><a class='u'
name="render"
>render</a></h2>

<pre>my $output = $mt->render('<%= 1 + 1 %>');
my $output = $mt->render('<%= shift() + shift() %>', @args);
my $output = $mt->render('<%= $foo %>', {foo => 'bar'});</pre>

<p>テンプレートを描画し、結果を返します。描画に失敗した場合は、<a href="/Mojo::Exception.html">Mojo::Exception</a>オブジェクトを返します。</p>

<pre># 長いバージョン
my $output = $mt->parse('<%= 1 + 1 %>')->process;

# 引数を渡して描画
say Mojo::Template->new->render('<%= $_[0] %>', 'bar');

# 名前付きの変数を渡して描画
say Mojo::Template->new(vars => 1)->render('<%= $foo %>', {foo => 'bar'});</pre>

<h2><a class='u'
name="render_file"
>render_file</a></h2>

<pre>my $output = $mt->render_file('/tmp/foo.mt');
my $output = $mt->render_file('/tmp/foo.mt', @args);
my $output = $mt->render_file('/tmp/bar.mt', {foo => 'bar'});</pre>

<p>renderと同じですが、テンプレートファイルに描画します。</p>

<h1><a class='u'
name="_"
>参考</a></h1>

<p><a href="https://metacpan.org/pod/Mojolicious" class="podlinkpod"
>Mojolicious</a>, <a href="https://metacpan.org/pod/Mojolicious%3A%3AGuides" class="podlinkpod"
>Mojolicious::Guides</a>, <a href="http://mojolicio.us" class="podlinkurl"
>http://mojolicio.us</a>.</p>

<p>(Mojolicious 8.12を反映。2019年5月29日更新)</p>

<!-- end doc -->

</body></html>

  </div>
  <div class="bottom">
    <!-- bottom -->

  </div>
</div>

        </div>
        <div class="side">
          <!-- side -->
<div class="side-list">
  <div class="side-list-title">
    Side Bar
  </div>
  <ul>
    <li><a href="/list.html">Entries</a></li>
    <li>Bar</li>
    <li>Baz</li>
  </ul>
</div>

        </div>
      </div>
      <div class="footer">
        <!-- footer -->
<a href="https://github.com/yuki-kimoto/giblog">Giblog</a>

      </div>
    </div>
  </body>
</html>
